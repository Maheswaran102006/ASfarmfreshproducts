<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AS Fresh Farm Products — Order Online</title>
  <style>
    :root{--green:#2d6a3a;--accent:#f7d46c;--bg:#fffdf8}
    body{font-family: Arial, Helvetica, sans-serif;margin:0;background:#faf9f6;color:#222}
    header{background:linear-gradient(180deg,#ffffff88, #f3f7f1);padding:18px 20px;display:flex;align-items:center;justify-content:center;position:relative}
    header img.logo{height:64px;margin-right:14px;border-radius:8px}
    header h1{font-family: 'Georgia', 'Times New Roman', Times, serif;margin:0;color:var(--green);font-size:28px}
    /* Hamburger */
    .hamburger{position:fixed;top:14px;left:14px;z-index:1200}
    .hamburger button{background:transparent;border:none;cursor:pointer;font-size:26px;padding:8px;border-radius:8px}
    .nav-menu{position:fixed;top:60px;left:14px;background:#fff;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.12);display:none;padding:8px;z-index:1200}
    .nav-menu a{display:block;padding:8px 12px;color:#222;text-decoration:none;border-radius:6px;margin:4px 0}
    .nav-menu a:hover{background:#f1f1f1}
    .container{max-width:1100px;margin:28px auto;padding:0 16px}
    .hero{background-image:url('assets/background.jpg');background-size:cover;background-position:center;border-radius:10px;padding:40px;color:#fff;display:flex;gap:24px}
    .hero .intro{background:rgba(0,0,0,0.35);padding:22px;border-radius:8px;max-width:560px}
    .hero h2{margin:0 0 8px;font-size:36px}
    .hero p{margin:0 0 12px}
    .grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px;margin-top:18px}
    .card{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(15,20,15,0.08)}
    .card img{width:100%;height:180px;object-fit:cover}
    .card .content{padding:12px}
    .card h3{margin:0 0 6px}
    .quote{font-style:italic;color:#555;margin-top:8px;padding:0 12px 12px}
    /* Order Panel (modal) */
    #orderPage{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:1300}
    .order-panel{background:#fff;width:100%;max-width:720px;border-radius:10px;padding:18px;box-shadow:0 12px 40px rgba(0,0,0,0.25);position:relative}
    .order-panel h2{margin-top:0}
    .form-row{display:flex;gap:10px;margin-bottom:10px}
    .form-row label{flex:1}
    input[type=text],input[type=number],select,textarea{width:100%;padding:8px;border:1px solid #cfcfcf;border-radius:6px}
    button{background:var(--green);color:#fff;padding:10px 14px;border:none;border-radius:6px;cursor:pointer}
    .secondary{background:#666}
    /* Invoice style */
    .invoice{font-family: 'Times New Roman', Times, serif;background:linear-gradient(90deg, #fff6d6 0%, #ffffff 100%);padding:18px;border-radius:8px}
    .invoice h3{margin:4px 0}
    .invoice table{width:100%;border-collapse:collapse}
    .invoice th,.invoice td{padding:8px;border-bottom:1px dashed #c9c9c9;text-align:left}
    /* Posts/Admin */
    #postsGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
    .post{background:#fff;padding:8px;border-radius:8px}
    footer{margin-top:28px;padding:18px;text-align:center;color:#444}
    @media(max-width:800px){.grid{grid-template-columns:1fr}.hero{flex-direction:column}.form-row{flex-direction:column}}
    /* small helper for close button */
    .close-btn{position:absolute;top:10px;right:14px;background:none;border:none;font-size:28px;cursor:pointer;color:#444}
  </style>
</head>
<body>
  <header>
    <img src="assets/logo.jpeg" alt="AS Farm Fresh Logo" class="logo" />
    <h1>AS Fresh Farm Products</h1>
  </header>

  <!-- Hamburger + menu -->
  <div class="hamburger">
    <button id="hambBtn" aria-label="Open menu">☰</button>
    <div class="nav-menu" id="navMenu" role="menu" aria-hidden="true">
      <a href="#home" data-target="home">Home</a>
      <a href="#about" data-target="about">About</a>
      <a href="#posts" data-target="posts">Posts</a>
      <a href="#contact" data-target="contact">Contact</a>
      <a href="#" id="openOrderBtn">Order / Pre-book</a>
    </div>
  </div>

  <main class="container" id="home">
    <section class="hero">
      <div class="intro">
        <h2>Pure Buffalo Milk • Paneer • Ghee</h2>
        <p>Traditional methods, farm-to-table transparency. Order fresh products directly from our farm.</p>
        <p><strong>Contact:</strong> asfarmfresh01@gmail.com • +91 8056748395</p>
      </div>
      <div style="flex:1;display:flex;flex-direction:column;gap:10px;justify-content:center">
        <img src="assets/milk.png" alt="milk" style="max-height:120px;object-fit:contain;background:#fff;padding:8px;border-radius:8px"/>
        <img src="assets/paneer.png" alt="paneer" style="max-height:120px;object-fit:contain;background:#fff;padding:8px;border-radius:8px"/>
        <img src="assets/ghee.png" alt="ghee" style="max-height:120px;object-fit:contain;background:#fff;padding:8px;border-radius:8px"/>
      </div>
    </section>

    <section class="grid" style="margin-top:18px">
      <div class="card">
        <img src="assets/milk.png" alt="Milk section background" />
        <div class="content">
          <h3>Buffalo Milk — ₹60 / L</h3>
          <p class="quote">"Pure, wholesome, straight from our buffaloes — excellence in every drop."</p>
        </div>
      </div>

      <div class="card">
        <img src="assets/paneer.png" alt="Paneer section background" />
        <div class="content">
          <h3>Paneer — ₹150 / kg</h3>
          <p class="quote">"Handmade paneer with a firm texture — perfect for all recipes."</p>
        </div>
      </div>

      <div class="card">
        <img src="assets/ghee.png" alt="Ghee section background" />
        <div class="content">
          <h3>Ghee — ₹400 / L</h3>
          <p class="quote">"Traditionally clarified ghee — golden aroma and rich flavor."</p>
        </div>
      </div>
    </section>

    <section id="posts" style="margin-top:26px">
      <h2>Posts (Admin only)</h2>
      <p>Admin can add images, video, or PDF (password protected). Posts appear here after upload.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
        <button onclick="openAdmin()">Admin Upload</button>
        <button onclick="loadPosts()" class="secondary">Refresh Posts</button>
      </div>
      <div id="postsGrid"></div>
    </section>

    <section id="about" style="margin-top:26px">
      <h2>About Farm</h2>
      <p>AS Fresh Farm Products is located at North Street, Kasanadupudur, Thanjavur — we follow time-honored methods to produce paneer and ghee.</p>
    </section>

    <section id="contact" style="margin-top:26px">
      <h2>Contact</h2>
      <p>Address: North Street, Kasanadupudur, Thanjavur, 614904</p>
      <p>Email: asfarmfresh01@gmail.com • Phone: +91 8056748395</p>
    </section>
  </main>

  <footer>
    <small>© AS Fresh Farm Products — All rights reserved</small>
  </footer>

  <!-- Order Modal -->
  <div id="orderPage" aria-hidden="true">
    <div class="order-panel" role="dialog" aria-modal="true">
      <button class="close-btn" title="Close" onclick="closeOrder()">×</button>
      <h2 id="orderTitle">Place an Order</h2>
      <form id="orderForm" onsubmit="return handleOrder(event)">
        <div class="form-row">
          <label>Customer name:<br/><input type="text" id="custName" required></label>
          <label>Mobile number:<br/><input type="text" id="custMobile" placeholder="+91-XXXXXXXXXX" required></label>
        </div>
        <div style="display:flex;gap:10px;margin-bottom:8px">
          <label style="flex:1">Product:<br/>
            <select id="product" onchange="updateUnitAndPrice()">
              <option value="milk">Buffalo Milk</option>
              <option value="paneer">Paneer</option>
              <option value="ghee">Ghee</option>
            </select>
          </label>
          <label style="flex:1">Unit:<br/>
            <select id="unit">
              <option value="l">Liters (L)</option>
              <option value="ml">Milliliters (ml)</option>
              <option value="kg">Kilogram (kg)</option>
              <option value="g">Grams (g)</option>
            </select>
          </label>
        </div>

        <div class="form-row">
          <label style="flex:1">Quantity:<br/><input type="number" step="any" id="qty" value="1" required></label>
          <label style="flex:1">Order type:<br/>
            <select id="orderType">
              <option value="order">Order Now</option>
              <option value="prebook">Pre-book</option>
            </select>
          </label>
        </div>

        <div style="margin-bottom:8px">Price per base unit shown below. GST (5%) will be added automatically.</div>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
          <div style="flex:1">Base price: <strong id="basePrice">₹60 / L</strong></div>
          <div style="flex:1">Calculated total: <strong id="calcTotal">₹0.00</strong></div>
        </div>

        <div style="display:flex;gap:8px">
          <button type="submit">Place Order & Send Bill</button>
          <button type="button" class="secondary" onclick="closeOrder()">Cancel</button>
        </div>
      </form>

      <div id="invoiceWrap" style="display:none;margin-top:12px">
        <div class="invoice" id="invoiceContent"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button onclick="printInvoice()">Download / Print Bill</button>
          <button class="secondary" onclick="resendInvoice()">Resend Email</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Upload Modal -->
  <div id="adminModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;padding:18px;z-index:1400">
    <div style="background:#fff;padding:16px;border-radius:10px;max-width:720px;width:100%;position:relative">
      <button class="close-btn" title="Close" onclick="closeAdmin()">×</button>
      <h3>Admin Upload (password required)</h3>
      <div style="display:flex;gap:8px;margin-bottom:8px">
        <input type="password" id="adminPass" placeholder="Enter password"/>
        <button onclick="adminLogin()">Unlock</button>
        <button onclick="closeAdmin()" class="secondary">Close</button>
      </div>
      <div id="adminArea" style="display:none">
        <p>Upload image / video / pdf to create a post.</p>
        <input type="file" id="postFile" accept="image/*,video/*,application/pdf" />
        <br/><br/>
        <input type="text" id="postTitle" placeholder="Post title / caption" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:6px" />
        <div style="margin-top:8px;display:flex;gap:8px">
          <button onclick="createPost()">Upload Post</button>
          <button class="secondary" onclick="lockAdmin()">Lock & Logout</button>
        </div>
      </div>
    </div>
  </div>

<script>
const FARM_EMAIL='asfarmfresh01@gmail.com';
const FARM_MOBILE='+918056748395';
const ADMIN_PASSWORD='asfarm8056';
const EMAILJS_SERVICE_ID='YOUR_EMAILJS_SERVICE_ID';
const EMAILJS_TEMPLATE_ID='YOUR_EMAILJS_TEMPLATE_ID';
const EMAILJS_PUBLIC_KEY='YOUR_EMAILJS_PUBLIC_KEY';
const SMS_EMAIL_TO='';

const PRICES={milk:{perL:60},ghee:{perL:400},paneer:{perKg:150}};
const hambBtn=document.getElementById('hambBtn');
const navMenu=document.getElementById('navMenu');
hambBtn.addEventListener('click',()=>{const s=navMenu.style.display==='block';navMenu.style.display=s?'none':'block';});
document.querySelectorAll('.nav-menu a[data-target]').forEach(a=>{a.addEventListener('click',e=>{e.preventDefault();document.getElementById(a.getAttribute('data-target')).scrollIntoView({behavior:'smooth'});navMenu.style.display='none';});});
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeAllPopups();});
function closeAllPopups(){closeOrder();closeAdmin();}
document.getElementById('openOrderBtn').addEventListener('click',openOrder);
document.getElementById('unit').addEventListener('change',calculate);
document.getElementById('qty').addEventListener('input',calculate);
document.getElementById('product').addEventListener('change',calculate);
updateUnitAndPrice();loadPosts();

function openOrder(){document.getElementById('orderPage').style.display='flex';calculate();}
function closeOrder(){document.getElementById('orderPage').style.display='none';document.getElementById('invoiceWrap').style.display='none';}
function updateUnitAndPrice(){const p=document.getElementById('product').value;if(p==='milk'){document.getElementById('unit').value='l';document.getElementById('basePrice').innerText='₹'+PRICES.milk.perL+' / L';}
if(p==='ghee'){document.getElementById('unit').value='l';document.getElementById('basePrice').innerText='₹'+PRICES.ghee.perL+' / L';}
if(p==='paneer'){document.getElementById('unit').value='kg';document.getElementById('basePrice').innerText='₹'+PRICES.paneer.perKg+' / kg';}calculate();}
function calculate(){const p=document.getElementById('product').value;const u=document.getElementById('unit').value;const q=parseFloat(document.getElementById('qty').value)||0;let t=0;if(p==='milk'){const perMl=PRICES.milk.perL/1000;t=u==='l'?q*PRICES.milk.perL:u==='ml'?q*perMl:q*PRICES.milk.perL;}
if(p==='ghee'){const perMl=PRICES.ghee.perL/1000;t=u==='l'?q*PRICES.ghee.perL:u==='ml'?q*perMl:q*PRICES.ghee.perL;}
if(p==='paneer'){const perG=PRICES.paneer.perKg/1000;t=u==='kg'?q*PRICES.paneer.perKg:u==='g'?q*perG:q*PRICES.paneer.perKg
