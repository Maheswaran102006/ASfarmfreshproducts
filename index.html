<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AS Fresh Farm Products â€” Order Online</title>
<style>
:root{--green:#2d6a3a;--accent:#f7d46c;}
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#faf9f6;color:#222}
header{background:linear-gradient(180deg,#f7d46c,#fff7cc);border-bottom:2px solid #e0c25f;padding:18px 20px;display:flex;align-items:center;justify-content:center;position:relative}
header img{height:64px;margin-right:12px;border-radius:8px}
header h1{font-family:'Times New Roman',serif;margin:0;color:#2d6a3a;font-size:30px}
.hamburger{position:fixed;top:14px;left:14px;z-index:1200}
.hamburger button{background:none;border:none;font-size:26px;cursor:pointer}
.nav-menu{position:fixed;top:60px;left:14px;background:#fff;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.12);display:none;padding:8px;z-index:1300}
.nav-menu a{display:block;padding:8px 12px;color:#2d6a3a;font-weight:bold;text-decoration:none;border-radius:6px}
.nav-menu a:hover{background:#f7d46c}
.container{max-width:1000px;margin:28px auto;padding:0 16px}
.hero{background:url('assets/background.jpg')center/cover;border-radius:10px;padding:40px;color:#fff;display:flex;gap:24px}
.hero .intro{background:rgba(0,0,0,0.45);padding:22px;border-radius:8px;max-width:520px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px;margin-top:18px}
.card{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
.card img{width:100%;height:180px;object-fit:cover}
.card .content{padding:12px}
.card h3{margin:0 0 6px}
.quote{font-style:italic;color:#555;margin-top:8px;padding:0 12px 12px}
footer{margin-top:26px;text-align:center;padding:14px;color:#555}
@media(max-width:700px){.hero{flex-direction:column}}
</style>
</head>
<body>

<header>
  <img src="assets/logo.jpeg" alt="AS Farm Fresh Logo"/>
  <h1>AS Fresh Farm Products</h1>
</header>

<main class="container" id="home">
  <section class="hero">
    <div class="intro">
      <h2>Pure Buffalo Milk â€¢ Paneer â€¢ Ghee</h2>
      <p>Farm-fresh, preservative-free dairy products directly from our farm.</p>
      <p><strong>Contact:</strong> asfarmfresh01@gmail.com â€¢ +91 8056748395</p>
    </div>
  </section>

  <section class="grid">
    <div class="card"><img src="assets/milk.png"><div class="content"><h3>Buffalo Milk â€” â‚¹60 / L</h3></div></div>
    <div class="card"><img src="assets/paneer.png"><div class="content"><h3>Paneer â€” â‚¹150 / kg</h3></div></div>
    <div class="card"><img src="assets/ghee.png"><div class="content"><h3>Ghee â€” â‚¹400 / L</h3></div></div>
  </section>

  <section id="about" style="margin-top:26px">
    <h2>About</h2>
    <p>Located at North Street, Kasanadupudur, Thanjavur â€” we ensure sustainable and ethical dairy farming with traditional processing.</p>
  </section>
</main>

<footer>Â© AS Fresh Farm Products â€” All rights reserved</footer>

<!-- Order Modal -->
<div id="orderPage">
  <div class="order-panel" role="dialog" aria-modal="true">
    <h2>Place Order / Pre-book</h2>
    <div class="form-row">
      <label>Customer name:<br><input type="text" id="custName" required></label>
      <label>Mobile number:<br><input type="text" id="custMobile" required></label>
    </div>
    <div class="form-row">
      <label>Product:<br>
        <select id="product" onchange="updateUnitAndPrice()">
          <option value="milk">Buffalo Milk</option>
          <option value="paneer">Paneer</option>
          <option value="ghee">Ghee</option>
        </select>
      </label>
      <label>Quantity:<br><input type="number" id="qty" value="1" min="0.01" step="any" oninput="calculate()"></label>
    </div>
    <div style="margin-bottom:8px">Total: <strong id="calcTotal">â‚¹0.00</strong></div>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button onclick="placeOrder()">Place Order & Send Bill</button>
    </div>
  </div>
</div>

<script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js"></script>
<script>
const FARM_EMAIL = 'asfarmfresh01@gmail.com';
const FARM_WHATSAPP = '918056748395';

const EMAILJS_SERVICE_ID = 'YOUR_EMAILJS_SERVICE_ID';
const EMAILJS_TEMPLATE_ID = 'YOUR_EMAILJS_TEMPLATE_ID';
const EMAILJS_PUBLIC_KEY = 'YOUR_EMAILJS_PUBLIC_KEY';

const PRICES = { milk: 60, paneer: 150, ghee: 400 };

document.addEventListener('DOMContentLoaded', () => { emailjs.init(EMAILJS_PUBLIC_KEY); });

function calculate(){
  const product = document.getElementById('product').value;
  const qty = parseFloat(document.getElementById('qty').value) || 0;
  const price = PRICES[product];
  const total = price * qty;
  document.getElementById('calcTotal').innerText = 'â‚¹' + total.toFixed(2);
  return total;
}

function placeOrder(){
  const name = document.getElementById('custName').value.trim();
  const mobile = document.getElementById('custMobile').value.trim();
  const product = document.getElementById('product').value;
  const qty = parseFloat(document.getElementById('qty').value);
  const total = calculate();

  if (!name || !mobile || qty <= 0) { alert('Please fill all details.'); return; }

  const order = { name, mobile, product, qty, total, date: new Date().toLocaleString() };

  sendInvoiceByEmail(order)
    .then(() => {
      alert('Bill sent to farm email successfully.');
      sendBillToWhatsApp(order); // <-- added
    })
    .catch(err => {
      console.error('Email error:', err);
      alert('Email sending failed, but WhatsApp will still open.');
      sendBillToWhatsApp(order); // <-- fallback
    });
}

/* Send bill via EmailJS */
async function sendInvoiceByEmail(order){
  const params = {
    farm_email: FARM_EMAIL,
    customer_name: order.name,
    customer_mobile: order.mobile,
    product: order.product,
    qty: order.qty,
    total: order.total,
    order_date: order.date
  };
  await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, params);
}

/* WhatsApp auto-send (new) */
function sendBillToWhatsApp(order){
  const msg = `ðŸ§¾ *AS FARM FRESH BILL* 
Customer: ${order.name}
Mobile: ${order.mobile}
Product: ${order.product}
Quantity: ${order.qty}
Total: â‚¹${order.total}
Date: ${order.date}

âœ… Sent automatically from AS FARM FRESH Website`;
  const url = `https://wa.me/${FARM_WHATSAPP}?text=${encodeURIComponent(msg)}`;
  window.open(url, "_blank");
}
</script>
</body>
</html>
